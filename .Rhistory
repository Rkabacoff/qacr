build_site()
library(qacr)
?recodes
library(qacr)
?recodes
library(qacr)
?recodes
library(qacr)
?recodes
library(qacr)
?recodes
library(qacr)
?recodes
library(qacr)
?recodes
build_site()
library(qacr)
?recodes
library(qacr)
?recodes
build_site()
df <- data.frame(x = c(1, 2, 3),
y = c("a", "b", "c"),
z = c("d", "e", "f"))
df$y <- factor(df$y)
str(df)
df2 <- recodes(df, "x", 1, "YYY")
df2
str(df2)
df2 <- recodes(df, "y", "a", 1)
df2
df2
str(df2)
df2 <- recodes(df, "y", c("a", "b", "c"), c(1, 2, 3))
df2
str(df2)
df <- data.frame(x = c(1, 2, 3),
y = c("a", "b", "c"),
z = c("d", "e", "f"))
df$y <- factor(df$y)
str(df)
df2 <- recodes(df, "y", c("a", "b", "c"), c(1, 2, 3))
df2
str(df2)
df2 <- recodes(df, "y", c("a", "b", "c"), c("aa", "bb", "cc"))
df2
str(df2)
df2 <- recodes(df, "z", c("d", "e", "f"), c("aa", "bb", "cc"))
df2
str(df2)
lift <- function(actual, prob, positive="yes"){
require(dplyr)
require(ggplot2)
df <- data.frame(prob_positive = prob, actual=actual)
df <- df %>% mutate(decile = 11 - ntile(prob_positive, 10))
tbl1 <- df %>% group_by(decile) %>% summarize(ncases=n())
tbl2 <- df %>% filter(actual == positive) %>%
group_by(decile) %>% summarize(nresp=n())
tbl <- inner_join(tbl1, tbl2, by="decile")
tbl <- tbl %>% mutate(cumresp = cumsum(nresp))
tbl <- tbl %>% mutate(pctevents = round(nresp/sum(nresp)*100, 2))
tbl <- tbl %>% mutate(gain = cumsum(pctevents))
tbl <- tbl %>% mutate(cumlift = gain /(decile*10))
tbl <- tbl %>% mutate(decile = 10* decile)
# add 0,0
tbl0 <- tbl[1,] %>% mutate(decile=0, gain=0)
rndm <- tibble(x=seq(0,100, 10), y=seq(0,100, 10))
# create gain chart
p1 <- ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line() +
scale_x_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100)) +
scale_y_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100)) +
geom_point(data=rndm, aes(x=x, y=y), color="red") +
geom_line(data=rndm, aes(x=x, y=y), color="red", linetype=2) +
labs(title = "Gain Chart",
x = "% of data",
y = "% of events") +
theme(panel.grid.minor=element_blank())
# create lift chart
rndm <- tibble(x=seq(0,100, 10), y=1)
p2 <- ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line() +
scale_x_continuous(breaks = seq(10, 100, 10),
limits=c(10, 100)) +
geom_point(data=rndm, aes(x=x, y=y), color="red") +
geom_line(data=rndm, aes(x=x, y=y), color="red", linetype=2) +
labs(title = "Lift Chart",
x = "% of data",
y = "Lift") +
theme(panel.grid.minor.x=element_blank())
plot(p1)
plot(p2)
return(tbl)
}
library(qacr)
library(pkgdown)
build_site()
build_site()
library(qacr)
build_site()
data(heart)
?heart
fit <- glm(disease ~ . , heart,
family=binomial)
summary(fit)
?predict.glm
pred <- predict(fit, newdata=heart, type="response")
pred
lift_plot(heart$disease, pred, positive="yes")
results <- lift_plot(heart$disease, pred, positive="yes")
results
library(qacr)
build_site()
build_site()
?breast
data(breast)
fit <- glm(recurrence ~ . , breast, family=binomial)
summary(fit)
pred <- predict(fit, newdata=breast, type="response")
results <- lift_plot(breast$recurrence, pred, positive="yes")
print(results)
contents(breast)
data(breast)
breast <- na.omit(breast)
fit <- glm(recurrence ~ . , breast, family=binomial)
pred <- predict(fit, newdata=breast, type="response")
results <- lift_plot(breast$recurrence, pred, positive="yes")
print(results)
library(qacr)
data(heart)
heart <- na.omit(heart)
fit <- glm(disease ~ . , heart, family=binomial)
pred <- predict(fit, newdata=heart, type="response")
debug(lift_plot)
results <- lift_plot(heart$disease, pred, positive="yes")
tbl1
tbl2
tbl
tbl
tbl
tbl
tbl
tbl
tbl10
tbl0
tbl
rndm
tbl
rbind(tbl0, tbl)
ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line()
ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line() +
scale_x_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100)) +
scale_y_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100))
ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line() +
scale_x_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100))
ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line() +
scale_y_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100))
rbind(tbl0, tbl)
ggplot(data=rbind(tbl0, tbl), aes(x=decile, y=gain)) +
geom_point(size=3) + geom_line() +
scale_x_continuous(breaks = seq(0, 100, 10),
limits=c(0, 100)) +
scale_y_continuous(breaks = seq(0, 100, 10),
limits=c(0, 101))
library(qacr)
build_site()
library(qacr)
build_site()
data(heart)
heart <- na.omit(heart)
fit <- glm(disease ~ . , heart, family=binomial)
pred <- predict(fit, newdata=heart, type="response")
lift_plot(heart$disease, pred, positive="yes")
debug(lift_plot)
results <- lift_plot(heart$disease, pred, positive="yes")
plot(p1)
plot(p2)
ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line()
ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line() +
scale_x_continuous(breaks = seq(10, 100, 10),
limits=c(10, 100))
ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line() +
scale_x_continuous(breaks = seq(10, 100, 10),
limits=c(10, 100)) +
geom_point(data=rndm, aes(x=x, y=y), color="red")
tbl
rndm
rndm <- tibble(x=seq(10,100, 10), y=1)
ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line() +
scale_x_continuous(breaks = seq(10, 100, 10),
limits=c(10, 100)) +
geom_point(data=rndm, aes(x=x, y=y), color="red")
ggplot(data=tbl, aes(x=decile, y=cumlift)) +
geom_point() + geom_line() +
scale_x_continuous(breaks = seq(10, 100, 10),
limits=c(10, 100)) +
geom_point(data=rndm, aes(x=x, y=y), color="red") +
geom_line(data=rndm, aes(x=x, y=y), color="red", linetype=2)
data(heart)
fit <- glm(disease ~ . , heart, family=binomial)
library(qacr)
data(heart)
fit <- glm(disease ~ . , heart, family=binomial)
pred <- predict(fit, newdata=heart, type="response")
results <- lift_plot(heart$disease, pred, positive="yes")
print(results)
debug(lift_plot)
results <- lift_plot(heart$disease, pred, positive="yes")
tbl
results <- lift_plot(heart$disease, pred, positive="yes")
tbl
results <- lift_plot(heart$disease, pred, positive="yes")
df
df
data(heart)
heart <- na.omit(heart)
fit <- glm(disease ~ . , heart, family=binomial)
pred <- predict(fit, newdata=heart, type="response")
debug(lift_plot)
results <- lift_plot(heart$disease, pred, positive="yes")
library(qacr)
build_site()
library(qacr)
build_site()
histograms(cars74, bins=20)
histograms(cars74, bins=20, fill="brickred")
colors()
histograms(cars74, bins=20, fill="darkred")
build_site()
histograms(cars74, bins=15, fill="darkred")
histograms(cars74, bins=10, fill="darkred")
library(qacr)
build_site()
library(qacr)
# logistic regression
data(heart)
heart <- na.omit(heart)
fit <- glm(disease ~ . , heart, family=binomial)
prob <- predict(fit, newdata=heart, type="response")
roc_plot(heart$disease, prob, positive="yes")
library(qacr)
build_site()
?geom_roc
?predict.glm
geom_roc
getAnywhere(geom_roc)
GeomRoc
getAnywhere(GeomRoc)
univariate_plot(cardata, highway_mpg)
univariate_plot(cardata, highway_mpg)
names(cardata)
univariate_plot(cardata, msrp)
univariate_plot(cardata, engine_hp)
univariate_plot(cardata, engine_hp, alpha=.2)
univariate_plot(cardata, engine_hp, alpha=.1)
univariate_plot(cardata, city_mpg)
univariate_plot(cardata, city_mpg, densitycolor="darkred")
univariate_plot(cardata, city_mpg, densitycolor="darkred", pointcolor="darkred")
univariate_plot(cardata, city_mpg, densitycolor="darkred", pointcolor="darkred", alpha=1)
univariate_plot(cardata, city_mpg, densitycolor="darkred", pointcolor="darkred", alpha=.1)
univariate_plot(cardata, city_mpg, densitycolor="darkred", pointcolor="darkred", alpha=.5)
univariate_plot(cardata, city_mpg)
names(student)
univariate(student, freetime)
univariate_plot(student, freetime)
univariate_plot(student, absences)
univariate_plot(student, G3)
names(coffee)
univariate_plot(coffee, sweetness)
univariate_plot(coffee, color)
univariate_plot(coffee, total_cup_points)
names(amazon)
univariate_plot(amazon, number)
univariate_plot(amazon, number, density=FALSE)
univariate_plot(amazon, number, density=FALSE, bins=20)
univariate_plot(amazon, number, density=FALSE, bins=50)
univariate_plot(amazon, number, density=FALSE, bins=100)
univariate_plot(amazon, number, density=FALSE, bins=100, alpha=.01)
univariate_plot(amazon, number, density=FALSE, bins=100, alpha=.05)
univariate_plot(amazon, number, density=FALSE, bins=100, alpha=.02)
library(qacr)
build_site()
univariate_plot(cardata, city_mpg, fill="orange" pointcolor="darkgreen",
densitycolor="darkgreen", alpha=.4)
univariate_plot(cardata, city_mpg, fill="orange", pointcolor="darkgreen",
densitycolor="darkgreen", alpha=.4)
univariate_plot(cardata, city_mpg, fill="#9ebcda", pointcolor="#8856a7",
densitycolor="#e0ecf4", alpha=.4)
univariate_plot(cardata, city_mpg, fill="7fcdbb",
pointcolor="#2c7fb8",
densitycolor="#edf8b1", alpha=.4)
univariate_plot(cardata, city_mpg, fill="7fcdbb",
pointcolor="#2c7fb8",
densitycolor="#edf8b1", alpha=.4)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="mediumaquamarine",
pointcolor="#2c7fb8",
densitycolor="#edf8b1", alpha=.4)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#fbb4ae",
pointcolor="#ccebc5",
densitycolor="#fbb4ae", alpha=.4)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#fbb4ae",
pointcolor="#ccebc5",
densitycolor="#fbb4ae", alpha=.6)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#b3cde3",
pointcolor="#ccebc5",
densitycolor="#fbb4ae", alpha=.6)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#b3cde3",
pointcolor="#ccebc5",
densitycolor="#fbb4ae", alpha=.4)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#b3cde3",
pointcolor="#b3cde3",
densitycolor="#fbb4ae", alpha=.4)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#b3cde3",
pointcolor="#b3cde3",
densitycolor="#fbb4ae", alpha=.6)
#' the histogram. (default=TRUE)
#' @param densitycolor fill color for density curve.
#' @param alpha Alpha transparency (0-1) for the density curve and
#' jittered points.
#' @import ggplot2
#' @import patchwork
#' @return a ggplot2 graph
#' @export
#' @examples
#' univariate_plot(mtcars, mpg)
univariate_plot(cardata, city_mpg, fill="#b3cde3",
pointcolor="#b3cde3",
densitycolor="#fbb4ae", alpha=.7)
library(qacr)
build_site()
library(qacr)
build_site()
univariate_plot(cardata, city_mpg)
univariate_plot(cardata, hp)
names(cardata)
univariate_plot(cardata, popularity)
univariate_plot(cardata, popularity, alpha=.01)
univariate_plot(cardata, engine_hp, alpha=.01)
univariate_plot(cardata, engine_hp)
univariate_plot(cardata, engine_hp, alpha=.5)
univariate_plot(cardata, engine_hp, alpha=.1)
univariate_plot(cardata, engine_hp, alpha=.05)
univariate_plot(cardata, engine_hp, alpha=.01)
univariate_plot(cardata, engine_hp, alpha=.05)
univariate_plot(cardata, engine_hp, alpha=.05, fill="steelblue")
univariate_plot(cardata, engine_hp, alpha=.05, fill="red")
univariate_plot(cardata, engine_hp, alpha=.05, fill="red", pointcolor="darkred")
colors()
univariate_plot(cardata, engine_hp, alpha=.05, fill="violetred", pointcolor="darkred")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="darkred")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="red")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="tomato4")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="tomato2")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="tomato3")
univariate_plot(cardata, engine_hp, alpha=.05, fill="tomato", pointcolor="steelblue")
load("big5")
getwd()
load("R/big5")
library(usethis)
use_data(big5)
str(big5)
big5$engnat <- NULL
use_data(big5, overwrite=TRUE)
tab(big5, hand)
library(qacr)
tab(big5, hand)
tab(big5, source)
big5$source <- NULL
names(big5)
library(qacr)
?big5
library(qacr)
?big5
library(qacr)
library(qacr)
library(qacr)
?big5
library(qacr)
library(qacr)
?big5
library(qacr)
library(pkgdown)
build_site()
library(qacr)
rm(big5)
data(big5)
scree_plot(big5)
names(big5)
names(big5)
View(big5)
names(big5)
class(big5)
data(big5)
names(big5)
names(big5)[7:56]
big5 <- recodes(big5, vars=names(big5)[7:56],
from=0, to=NA)
library(qacr)
rm(big5)
data(big5)
big5 <- recodes(big5, vars=names(big5)[7:56],
from=0, to=NA)
contents(big5)
big5$source <- NULL
contents(big5)
names(big5)
attributes(big5)
summary(big5)
big5 <- na.omit(big5)
data(big5)
big5 <- recodes(big5, vars=names(big5)[7:56],
from=0, to=NA)
big5$source <- NULL
library(usethis)
use_data(big5, overwrite=TRUE)
library(qacr)
contents(big5)
data(big5)
names(big5)
v <- big5[6:55]
names(v)
length(v)
scree_plot(v)
v1 <- v[sample(1:nrow(v), 1000),]
scree_plot(v1)
View(v1)
?scree_plot
class(v1)
